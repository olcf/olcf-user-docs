

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Tuning and Analysis Utilities (TAU) &mdash; OLCF User Documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/theme_overrides.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  
  
  
    <link rel="canonical" href="https://docs.olcf.ornl.govsoftware/profiling/TAU.html"/>
  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
        <script src="../../_static/js/custom.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="User-Managed Software" href="../UMS/index.html" />
    <link rel="prev" title="Profiling Tools" href="index.html" />

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #efefef" >
          

          
            <a href="../../index.html">
          

          
            
            <img src="../../_static/olcf_logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference external" href="`New User Quick Start Guide &lt;https://github.com/olcf/NewUserQuickStart/blob/master/README.md&gt;`_" target="_blank">`New User Quick Start Guide &lt;https://github.com/olcf/NewUserQuickStart/blob/master/README.md&gt;`_</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../accounts/index.html">Accounts and Projects</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../accounts/accounts_and_projects.html">Request a New Allocation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../accounts/accounts_and_projects.html#what-are-the-differences-between-project-types">What are the differences between project types?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../accounts/accounts_and_projects.html#what-happens-after-a-project-request-is-approved">What happens after a project request is approved?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../accounts/accounts_and_projects.html#guidance-on-summit-allocation-requests">Guidance on Summit Allocation Requests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../accounts/accounts_and_projects.html#applying-for-a-user-account">Applying for a user account</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../accounts/accounts_and_projects.html#checking-the-status-of-your-application">Checking the status of your application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../accounts/accounts_and_projects.html#get-access-to-additional-projects">Get access to additional projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../accounts/frequently_asked_questions.html">Frequently Asked Questions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../accounts/frequently_asked_questions.html#how-do-i-apply-for-an-account">How do I apply for an account?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../accounts/frequently_asked_questions.html#what-is-the-status-of-my-application">What is the status of my application?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../accounts/frequently_asked_questions.html#how-should-i-acknowledge-the-olcf-in-my-publications-and-presentations">How should I acknowledge the OLCF in my publications and presentations?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../accounts/frequently_asked_questions.html#what-is-a-subproject">What is a subproject?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../accounts/frequently_asked_questions.html#i-no-longer-need-my-account-who-should-i-inform-and-what-should-i-do-with-my-olcf-issued-rsa-securid-token">I no longer need my account. Who should I inform and what should I do with my OLCF issued RSA SecurID token?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../accounts/frequently_asked_questions.html#my-securid-token-is-broken-expired-what-should-i-do">My SecurID token is broken/expired. What should I do?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../accounts/frequently_asked_questions.html#getting-help">Getting Help</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../accounts/frequently_asked_questions.html#additional-resources">Additional Resources</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../accounts/documents_and_forms.html">Documents and Forms</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../accounts/documents_and_forms.html#forms-for-requesting-a-project-allocation">Forms for Requesting a Project Allocation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../accounts/documents_and_forms.html#forms-for-requesting-an-account">Forms for Requesting an Account</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../accounts/documents_and_forms.html#forms-to-request-changes-to-computers-jobs-or-accounts">Forms to Request Changes to Computers, Jobs, or Accounts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../accounts/documents_and_forms.html#report-templates">Report Templates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../accounts/documents_and_forms.html#miscellaneous-forms">Miscellaneous Forms</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../accounts/olcf_policy_guide.html">OLCF Policy Guides</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../accounts/olcf_policy_guide.html#olcf-acknowledgement">OLCF Acknowledgement</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../accounts/olcf_policy_guide.html#computing-policy">Computing Policy</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../accounts/olcf_policy_guide.html#computer-use">Computer Use</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../accounts/olcf_policy_guide.html#data-use">Data Use</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../accounts/olcf_policy_guide.html#software-use">Software Use</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../accounts/olcf_policy_guide.html#user-accountability">User Accountability</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../accounts/olcf_policy_guide.html#data-management-policy">Data Management Policy</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../accounts/olcf_policy_guide.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../accounts/olcf_policy_guide.html#data-retention-purge-quotas">Data Retention, Purge, &amp; Quotas</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../accounts/olcf_policy_guide.html#data-prohibitions-safeguards">Data Prohibitions &amp; Safeguards</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../accounts/olcf_policy_guide.html#software">Software</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../accounts/olcf_policy_guide.html#security-policy">Security Policy</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../accounts/olcf_policy_guide.html#scope">Scope</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../accounts/olcf_policy_guide.html#personal-use">Personal Use</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../accounts/olcf_policy_guide.html#accessing-olcf-computational-resources">Accessing OLCF Computational Resources</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../accounts/olcf_policy_guide.html#data-management">Data Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../accounts/olcf_policy_guide.html#sensitive-data">Sensitive Data</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../accounts/olcf_policy_guide.html#data-transfer">Data Transfer</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../accounts/olcf_policy_guide.html#incite-allocation-under-utilization-policy">INCITE Allocation Under-utilization Policy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../accounts/olcf_policy_guide.html#project-reporting-policy">Project Reporting Policy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../accounts/olcf_policy_guide.html#non-proprietary-institutional-user-agreement-policy">Non-proprietary Institutional User Agreement Policy</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../accounts/olcf_policy_guide.html#access">Access</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../accounts/olcf_policy_guide.html#rules-and-regulations">Rules and Regulations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../accounts/olcf_policy_guide.html#safety-and-health">Safety and Health</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../accounts/olcf_policy_guide.html#intent-to-publish">Intent to Publish</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../accounts/olcf_policy_guide.html#export-control">Export Control</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../accounts/olcf_policy_guide.html#intellectual-property">Intellectual Property</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../accounts/olcf_policy_guide.html#special-requests-and-policy-exemptions">Special Requests and Policy Exemptions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../accounts/glossary.html">Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../accounts/index.html#additional-resources">Additional Resources</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../connecting/index.html">Connecting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../connecting/index.html#connecting-for-the-first-time">Connecting for the first time</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../connecting/index.html#activating-a-new-securid-fob">Activating a new SecurID fob</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../connecting/index.html#pins-passcodes-and-tokencodes">PINs, Passcodes, and Tokencodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../connecting/index.html#x11-forwarding">X11 Forwarding</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../connecting/index.html#id2">Systems Available to All Projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../connecting/index.html#olcf-system-hostnames">OLCF System Hostnames</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../connecting/index.html#checking-system-availability">Checking System Availability</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../systems/index.html">Systems</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../systems/summit_user_guide.html">Summit User Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../systems/summit_user_guide.html#summit-documentation-resources">Summit Documentation Resources</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../systems/summit_user_guide.html#system-overview">System Overview</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#summit-nodes">Summit Nodes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#node-types">Node Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#system-interconnect">System Interconnect</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#file-systems">File Systems</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#operating-system">Operating System</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#hardware-threads">Hardware Threads</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#gpus">GPUs</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../systems/summit_user_guide.html#connecting">Connecting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../systems/summit_user_guide.html#data-and-storage">Data and Storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../systems/summit_user_guide.html#software">Software</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../systems/summit_user_guide.html#shell-programming-environments">Shell &amp; Programming Environments</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#default-shell">Default Shell</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#environment-management-with-lmod">Environment Management with Lmod</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../systems/summit_user_guide.html#compiling">Compiling</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#compilers">Compilers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#linking-in-libraries">Linking in Libraries</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../systems/summit_user_guide.html#running-jobs">Running Jobs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#login-launch-and-compute-nodes">Login, Launch, and Compute Nodes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#batch-scripts">Batch Scripts</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#interactive-jobs">Interactive Jobs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#common-bsub-options">Common bsub Options</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#batch-environment-variables">Batch Environment Variables</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#job-states">Job States</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#scheduling-policy">Scheduling Policy</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#job-dependencies">Job Dependencies</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#job-launcher-jsrun">Job Launcher (jsrun)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#cuda-aware-mpi">CUDA-Aware MPI</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#monitoring-jobs">Monitoring Jobs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#interacting-with-jobs">Interacting With Jobs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#other-lsf-commands">Other LSF Commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#pbs-torque-moab-to-lsf-translation">PBS/Torque/MOAB-to-LSF Translation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#easy-mode-vs-expert-mode">Easy Mode vs. Expert Mode</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#system-service-core-isolation">System Service Core Isolation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#resource-accounting">Resource Accounting</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#other-notes">Other Notes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../systems/summit_user_guide.html#debugging">Debugging</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#arm-ddt">Arm DDT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#gdb">GDB</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#valgrind">Valgrind</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../systems/summit_user_guide.html#optimizing-and-profiling">Optimizing and Profiling</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#profiling-gpu-code-with-nvidia-developer-tools">Profiling GPU Code with NVIDIA Developer Tools</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#score-p">Score-P</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#vampir">Vampir</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../systems/summit_user_guide.html#nvidia-tesla-v100">NVIDIA V100 GPUs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#nvidia-v100-sm">NVIDIA V100 SM</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#hbm2">HBM2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#nvidia-nvlink">NVIDIA NVLink</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#volta-multi-process-service">Volta Multi-Process Service</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#unified-memory">Unified Memory</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#independent-thread-scheduling">Independent Thread Scheduling</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#tensor-cores">Tensor Cores</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#tesla-v100-specifications">Tesla V100 Specifications</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#further-reading">Further Reading</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../systems/summit_user_guide.html#burst-buffer">Burst Buffer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#nvme-xfs">NVMe (XFS)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#current-nvme-usage">Current NVMe Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#interactive-jobs-using-the-nvme">Interactive Jobs Using the NVMe</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#nvme-usage-example">NVMe Usage Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#spectral-library">Spectral Library</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../systems/summit_user_guide.html#known-issues">Known Issues</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#open-issues">Open Issues</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#resolved-issues">Resolved Issues</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#cuda-10-1-known-issues">CUDA 10.1 Known Issues</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../systems/summit_user_guide.html#training-system-ascent">Training System (Ascent)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#id26">File Systems</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#obtaining-access-to-ascent">Obtaining Access to Ascent</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#logging-in-to-ascent">Logging In to Ascent</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../systems/summit_user_guide.html#preparing-for-frontier">Preparing For Frontier</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#hip">HIP</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#using-hip-on-summit">Using HIP on Summit</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#learning-to-program-with-hip">Learning to Program with HIP</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/summit_user_guide.html#previous-frontier-training-events">Previous Frontier Training Events</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../systems/rhea_user_guide.html">Rhea User Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../systems/rhea_user_guide.html#system-overview">System Overview</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../systems/rhea_user_guide.html#compute-nodes">Compute nodes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/rhea_user_guide.html#login-nodes">Login nodes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/rhea_user_guide.html#file-systems">File systems</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../systems/rhea_user_guide.html#shell-and-programming-environments">Shell and programming environments</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../systems/rhea_user_guide.html#default-shell">Default shell</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/rhea_user_guide.html#environment-management-with-lmod">Environment management with lmod</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/rhea_user_guide.html#installed-software">Installed Software</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../systems/rhea_user_guide.html#compiling">Compiling</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../systems/rhea_user_guide.html#available-compilers">Available compilers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/rhea_user_guide.html#changing-compilers">Changing compilers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/rhea_user_guide.html#compiler-wrappers">Compiler wrappers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/rhea_user_guide.html#compiling-threaded-codes">Compiling threaded codes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../systems/rhea_user_guide.html#running-jobs">Running Jobs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../systems/rhea_user_guide.html#login-vs-compute-nodes-on-commodity-clusters">Login vs Compute Nodes on Commodity Clusters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/rhea_user_guide.html#slurm">Slurm</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/rhea_user_guide.html#interactive-batch-jobs-on-commodity-clusters">Interactive Batch Jobs on Commodity Clusters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/rhea_user_guide.html#common-batch-options-to-slurm">Common Batch Options to Slurm</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/rhea_user_guide.html#batch-environment-variables">Batch Environment Variables</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/rhea_user_guide.html#modifying-batch-jobs">Modifying Batch Jobs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/rhea_user_guide.html#monitoring-batch-jobs">Monitoring Batch Jobs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/rhea_user_guide.html#job-execution">Job Execution</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/rhea_user_guide.html#batch-queues-on-rhea">Batch Queues on Rhea</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/rhea_user_guide.html#job-accounting-on-rhea">Job Accounting on Rhea</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../systems/rhea_user_guide.html#visualization-tools">Visualization tools</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../systems/rhea_user_guide.html#paraview">ParaView</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/rhea_user_guide.html#visit">VisIt</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/rhea_user_guide.html#remote-visualization-using-vnc-non-gpu">Remote Visualization using VNC (non-GPU)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/rhea_user_guide.html#remote-visualization-using-vnc-gpu-nodes">Remote Visualization using VNC (GPU nodes)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/rhea_user_guide.html#remote-visualization-using-nice-dcv-gpu-nodes-only">Remote Visualization using Nice DCV (GPU nodes only)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../systems/home_user_guide.html">Home</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../systems/home_user_guide.html#system-overview">System Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../systems/home_user_guide.html#access-connecting">Access &amp; Connecting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../systems/home_user_guide.html#usage">Usage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../systems/home_user_guide.html#acceptable-tasks">Acceptable Tasks</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/home_user_guide.html#unacceptable-tasks">Unacceptable Tasks</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../systems/dtn_user_guide.html">Data Transfer Nodes (DTNs)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../systems/dtn_user_guide.html#system-overview">System Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../systems/dtn_user_guide.html#access-connecting">Access &amp; Connecting</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../systems/hpss_user_guide.html">High Performance Storage System</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../systems/hpss_user_guide.html#system-overview">System Overview</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../systems/ascent_user_guide.html">Ascent</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../systems/ascent_user_guide.html#system-overview">System Overview</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../systems/andes_user_guide.html">Andes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../systems/andes_user_guide.html#system-overview">System Overview</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../systems/andes_user_guide.html#compute-nodes">Compute nodes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/andes_user_guide.html#login-nodes">Login nodes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/andes_user_guide.html#file-systems">File systems</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../systems/andes_user_guide.html#shell-and-programming-environments">Shell and programming environments</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../systems/andes_user_guide.html#default-shell">Default shell</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/andes_user_guide.html#environment-management-with-lmod">Environment management with lmod</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/andes_user_guide.html#installed-software">Installed Software</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../systems/andes_user_guide.html#compiling">Compiling</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../systems/andes_user_guide.html#available-compilers">Available compilers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/andes_user_guide.html#changing-compilers">Changing compilers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/andes_user_guide.html#compiler-wrappers">Compiler wrappers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/andes_user_guide.html#compiling-threaded-codes">Compiling threaded codes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../systems/andes_user_guide.html#running-jobs">Running Jobs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../systems/andes_user_guide.html#login-vs-compute-nodes-on-commodity-clusters">Login vs Compute Nodes on Commodity Clusters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/andes_user_guide.html#slurm">Slurm</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/andes_user_guide.html#interactive-batch-jobs-on-commodity-clusters">Interactive Batch Jobs on Commodity Clusters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/andes_user_guide.html#common-batch-options-to-slurm">Common Batch Options to Slurm</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/andes_user_guide.html#batch-environment-variables">Batch Environment Variables</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/andes_user_guide.html#modifying-batch-jobs">Modifying Batch Jobs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/andes_user_guide.html#monitoring-batch-jobs">Monitoring Batch Jobs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/andes_user_guide.html#job-execution">Job Execution</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/andes_user_guide.html#batch-queues-on-andes">Batch Queues on Andes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/andes_user_guide.html#job-accounting-on-andes">Job Accounting on Andes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../systems/andes_user_guide.html#visualization-tools">Visualization tools</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../systems/andes_user_guide.html#paraview">ParaView</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/andes_user_guide.html#visit">VisIt</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/andes_user_guide.html#remote-visualization-using-vnc-non-gpu">Remote Visualization using VNC (non-GPU)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/andes_user_guide.html#remote-visualization-using-vnc-gpu-nodes">Remote Visualization using VNC (GPU nodes)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../systems/andes_user_guide.html#remote-visualization-using-nice-dcv-gpu-nodes-only">Remote Visualization using Nice DCV (GPU nodes only)</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../services_and_applications/index.html">Services and Applications</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../services_and_applications/slate/index.html">Slate</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../services_and_applications/slate/overview.html">Overview</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../services_and_applications/slate/overview.html#what-is-slate">What is Slate?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../services_and_applications/slate/overview.html#what-is-kubernetes">What is Kubernetes?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../services_and_applications/slate/overview.html#what-is-openshift">What is OpenShift?</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../services_and_applications/slate/getting_started.html">Getting Started</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../services_and_applications/slate/getting_started.html#requesting-a-slate-project-allocation">Requesting A Slate Project Allocation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../services_and_applications/slate/getting_started.html#logging-in">Logging in</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../services_and_applications/slate/getting_started.html#slate-namespaces">Slate Namespaces</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../services_and_applications/slate/getting_started.html#install-the-oc-tool">Install the OC tool</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../services_and_applications/slate/getting_started.html#test-login-with-oc-tool">Test login with OC Tool</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../services_and_applications/slate/guided_tutorial.html">Guided Tutorial</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../services_and_applications/slate/guided_tutorial.html#creating-your-project">Creating your project</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../services_and_applications/slate/guided_tutorial.html#guided-web-gui-tutorial">Guided Web GUI Tutorial</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../services_and_applications/slate/guided_tutorial_cli.html">Guided Tutorial: CLI</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../services_and_applications/slate/guided_tutorial_cli.html#adding-a-pod-to-your-project">Adding a Pod to your Project</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../services_and_applications/slate/image_building.html">Image Building</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../services_and_applications/slate/image_building.html#build-types">Build Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../services_and_applications/slate/image_building.html#examples">Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../services_and_applications/slate/image_building.html#logging-into-the-registry-externally">Logging into the registry externally</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../services_and_applications/slate/workloads/index.html">Workloads</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../services_and_applications/slate/workloads/pod.html">Pods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../services_and_applications/slate/workloads/deployment.html">Deployments</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../services_and_applications/slate/networking/index.html">Networking</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../services_and_applications/slate/networking/services.html">Services</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../services_and_applications/slate/networking/nodeport.html">NodePorts</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../services_and_applications/slate/networking/route.html">Routes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../services_and_applications/slate/networking/networkpolicy.html">Network Policies</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../services_and_applications/slate/networking/port_forwarding.html">Quick Access from Outside Slate</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../services_and_applications/slate/storage.html">Persistent Storage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../services_and_applications/slate/storage.html#creating-a-persistent-volume-claim">Creating A Persistent Volume Claim</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../services_and_applications/slate/storage.html#adding-pvc-to-pod">Adding PVC To Pod</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../services_and_applications/slate/storage.html#backups">Backups</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../services_and_applications/slate/use_cases/index.html">Application Deployment Examples</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../services_and_applications/slate/use_cases/simple_website.html">Build and Deploy Simple Website</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../services_and_applications/slate/use_cases/mongodb_service.html">Deploy MongoDB</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../services_and_applications/slate/use_cases/nginx_hello_world.html">Deploy NGINX with Hello World</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../services_and_applications/slate/use_cases/helm_example.html">Deploy Packages with Helm</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../services_and_applications/slate/use_cases/minio.html">MinIO Object Store (On an NCCS Filesystem)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../services_and_applications/slate/access_olcf_resources/index.html">Access OLCF Resources From Containers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../services_and_applications/slate/access_olcf_resources/job_submit.html">Batch Job Submission</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../services_and_applications/slate/access_olcf_resources/mount_fs.html">Mount OLCF Filesystems</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../services_and_applications/slate/other_resources.html">Schedule Other Slate Resources</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../services_and_applications/slate/other_resources.html#gpus">GPUs</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../services_and_applications/slate/olcf_provided_applications/index.html">OLCF-Provided Applications on Slate</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../services_and_applications/slate/troubleshooting/index.html">Troubleshooting</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../services_and_applications/slate/troubleshooting/fix-writable-directories.html">Fix Container Image Permissions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../services_and_applications/slate/troubleshooting/debugging.html">Debugging</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../services_and_applications/slate/examples.html">YAML Object Quick Reference</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../services_and_applications/slate/examples.html#cronjobs">CronJobs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../services_and_applications/slate/examples.html#deployments-and-stateful-sets">Deployments and Stateful Sets</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../services_and_applications/slate/examples.html#pods">Pods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../services_and_applications/slate/examples.html#roles-and-rolebindings">Roles and Rolebindings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../services_and_applications/slate/examples.html#routes-services-and-nodeports">Routes, Services and Nodeports</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../services_and_applications/slate/examples.html#persistent-volume-claims">Persistent Volume Claims</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../services_and_applications/slate/glossary.html">Glossary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../services_and_applications/myolcf/index.html">myOLCF</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../services_and_applications/myolcf/overview.html">Overview</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../services_and_applications/myolcf/overview.html#what-is-myolcf">What is myOLCF?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../services_and_applications/myolcf/overview.html#what-can-it-do">What can it do?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../services_and_applications/myolcf/overview.html#can-i-suggest-a-feature">Can I suggest a feature?</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../services_and_applications/myolcf/authenticating.html">Authenticating</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../services_and_applications/myolcf/authenticating.html#olcf-moderate-accounts">OLCF Moderate Accounts</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../services_and_applications/myolcf/authenticating.html#olcf-open-accounts">OLCF Open Accounts</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../services_and_applications/myolcf/project_pages/project_pages.html">Project Pages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../services_and_applications/myolcf/project_pages/project_pages.html#project-context">Project Context</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../services_and_applications/myolcf/project_pages/project_pages.html#switching-project-contexts">Switching Project Contexts</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../services_and_applications/myolcf/project_pages/project_pages.html#available-pages">Available Pages</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../services_and_applications/myolcf/account_pages/account_pages.html">Account Pages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../services_and_applications/myolcf/account_pages/account_pages.html#account-context">Account Context</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../services_and_applications/myolcf/account_pages/account_pages.html#available-pages">Available Pages</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../services_and_applications/myolcf/account_pages/processing_membership_requests.html">Processing Project Membership Requests</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../data/index.html">Data Storage and Transfers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../data/storage_overview.html">Storage Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../data/storage_overview.html#storage-areas">Storage Areas</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../data/storage_overview.html#alpine-ibm-spectrum-scale-filesystem">Alpine IBM Spectrum Scale Filesystem</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../data/storage_overview.html#performance-under-not-ideal-workload">Performance under not ideal workload</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../data/storage_overview.html#tips">Tips</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../data/storage_overview.html#major-difference-between-lustre-and-ibm-spectrum-scale">Major difference between Lustre and IBM Spectrum Scale</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../data/policies.html">Policy</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../data/policies.html#information">Information</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../data/policies.html#purge">Purge</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../data/policies.html#data-retention">Data Retention</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../data/user_centric.html">User-Centric Data Storage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../data/user_centric.html#user-home-directories-nfs">User Home Directories (NFS)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../data/user_centric.html#user-home-quotas">User Home Quotas</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../data/user_centric.html#user-home-permissions">User Home Permissions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../data/user_centric.html#user-home-backups">User Home Backups</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../data/user_centric.html#user-website-directory">User Website Directory</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../data/user_centric.html#user-archive-directories-hpss">User Archive Directories (HPSS)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../data/user_centric.html#user-archive-access">User Archive Access</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../data/user_centric.html#user-archive-accounting">User Archive Accounting</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../data/project_centric.html">Project-Centric Data Storage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../data/project_centric.html#project-home-directories-nfs">Project Home Directories (NFS)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../data/project_centric.html#project-home-path">Project Home Path</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../data/project_centric.html#project-home-quotas">Project Home Quotas</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../data/project_centric.html#project-home-permissions">Project Home Permissions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../data/project_centric.html#project-home-backups">Project Home Backups</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../data/project_centric.html#project-work-areas">Project Work Areas</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../data/project_centric.html#three-project-work-areas-to-facilitate-collaboration">Three Project Work Areas to Facilitate Collaboration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../data/project_centric.html#backups">Backups</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../data/project_centric.html#project-archive-directories">Project Archive Directories</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../data/project_centric.html#three-project-archive-areas-facilitae-collaboration-on-archival-data">Three Project Archive Areas Facilitae Collaboration on Archival Data</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../data/project_centric.html#project-archive-access">Project Archive Access</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../data/transferring.html">Transferring Data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../data/transferring.html#using-common-terminal-tools">Using common terminal tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../data/transferring.html#using-globus-from-your-local-machine">Using Globus from your local machine</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../data/archiving.html">HPSS Data Archival System</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../data/archiving.html#using-globus">Using Globus</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../data/archiving.html#using-hsi">Using HSI</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../data/archiving.html#additional-hsi-documentation">Additional HSI Documentation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../data/archiving.html#using-htar">Using HTAR</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../data/archiving.html#htar-limitations">HTAR Limitations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../data/archiving.html#additional-htar-documentation">Additional HTAR Documentation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../data/index.html#burst-buffer-and-spectral-library">Burst Buffer and Spectral Library</a></li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Software</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../software-news.html">Software News</a></li>
<li class="toctree-l2"><a class="reference internal" href="../analytics/index.html">ML/DL, Analytics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../analytics/ibm-wml-ce.html">IBM Watson Machine Learning CE -&gt; Open CE</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../analytics/ibm-wml-ce.html#getting-started">Getting Started</a></li>
<li class="toctree-l4"><a class="reference internal" href="../analytics/ibm-wml-ce.html#running-distributed-deep-learning-jobs">Running Distributed Deep Learning Jobs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../analytics/ibm-wml-ce.html#setting-up-custom-environments">Setting up Custom Environments</a></li>
<li class="toctree-l4"><a class="reference internal" href="../analytics/ibm-wml-ce.html#best-distributed-deep-learning-performance">Best Distributed Deep Learning Performance</a></li>
<li class="toctree-l4"><a class="reference internal" href="../analytics/ibm-wml-ce.html#example">Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../analytics/pbdR.html">Programming with Big Data in R (pbdR)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../python.html">Python on OLCF Systems</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Profiling Tools</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Tuning and Analysis Utilities (TAU)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#run-time-environment-variables">Run-Time Environment Variables</a></li>
<li class="toctree-l4"><a class="reference internal" href="#compile-time-environment-variables">Compile-Time Environment Variables</a></li>
<li class="toctree-l4"><a class="reference internal" href="#miniweather-example-application">MiniWeather Example Application</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cuda-profiling-tools-interface">CUDA Profiling Tools Interface</a></li>
<li class="toctree-l4"><a class="reference internal" href="#tracing">Tracing</a></li>
<li class="toctree-l4"><a class="reference internal" href="#selective-instrumentation">Selective Instrumentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dynamic-phase">Dynamic Phase</a></li>
<li class="toctree-l4"><a class="reference internal" href="#static-phase">Static Phase</a></li>
<li class="toctree-l4"><a class="reference internal" href="#openmp-offload">OpenMP Offload</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../UMS/index.html">User-Managed Software</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../UMS/Flux.html">Flux</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../training/index.html">Training</a><ul>
<li class="toctree-l2"><a class="reference external" href="https://www.olcf.ornl.gov/for-users/training/training-calendar" target="_blank">OLCF Training Calendar</a></li>
<li class="toctree-l2"><a class="reference external" href="https://github.com/olcf-tutorials" target="_blank">OLCF Tutorials</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../training/training_archive.html">OLCF Training Archive</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../training/olcf_gpu_hackathons.html">OLCF GPU Hackathons</a></li>
<li class="toctree-l2"><a class="reference external" href="https://vimeo.com/channels/olcftraining" target="_blank">OLCF Vimeo Channel</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/index.html">Contributing to these docs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../contributing/index.html#submitting-suggestions">Submitting suggestions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing/index.html#authoring-content">Authoring content</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../contributing/index.html#setup-authoring-environment">Setup authoring environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contributing/index.html#edit-the-docs">Edit the docs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contributing/index.html#resources">Resources</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing/index.html#github-guidelines">GitHub Guidelines</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">OLCF User Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">Software</a> &raquo;</li>
        
          <li><a href="index.html">Profiling Tools</a> &raquo;</li>
        
      <li>Tuning and Analysis Utilities (TAU)</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/olcf/olcf-user-docs/blob/master/software/profiling/TAU.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="tuning-and-analysis-utilities-tau">
<span id="tau"></span><h1>Tuning and Analysis Utilities (TAU)<a class="headerlink" href="#tuning-and-analysis-utilities-tau" title="Permalink to this headline"></a></h1>
<p>TAU is a portable profiling and tracing toolkit that supports many programming
languages. The instrumentation can be done by inserting in the source code
using an automatic tool based on the Program Database Toolkit (PDT), on the
compiler instrumentation, or manually using the instrumentation API.</p>
<p>Webpage: <a class="reference external" href="https://www.cs.uoregon.edu/research/tau/home.php" target="_blank">https://www.cs.uoregon.edu/research/tau/home.php</a></p>
<p>TAU is installed with <a class="reference external" href="https://www.cs.uoregon.edu/research/pdt/home.php" target="_blank">Program Database Toolkit (PDT)</a> on Summit. PDT is a
framework for analyzing source code written in several programming languages.
Moreover, <a class="reference external" href="https://icl.utk.edu/papi/" target="_blank">Performance Application Programming Interface (PAPI)</a> is supported. PAPI counters are used to assess
the CPU performance. In this section, some approaches for profiling and tracing
will be presented.</p>
<p>In most cases, we need to use wrappers to recompile the application:</p>
<ul class="simple">
<li>For C: replace the compiler with the TAU wrapper <code class="docutils literal notranslate"><span class="pre">tau_cc.sh</span></code></li>
<li>For C++: replace the compiler with the TAU wrapper <code class="docutils literal notranslate"><span class="pre">tau_cxx.sh</span></code></li>
<li>For Fortran: replace the compiler with the TAU wrapper <code class="docutils literal notranslate"><span class="pre">tau_f90.sh</span></code> / <code class="docutils literal notranslate"><span class="pre">tau_f77.sh</span></code></li>
</ul>
<p>Even if you dont compile your application with a TAU wrapper, you can
profile some basic functionalities with <code class="docutils literal notranslate"><span class="pre">tau_exec</span></code>, for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>jsrun -n 4 r 4 a 1 c 1 tau_exec -T mpi ./test
</pre></div>
</div>
<p>The above command profiles MPI for the binary <code class="docutils literal notranslate"><span class="pre">test</span></code>, which was not compiled
with the TAU wrapper.</p>
<div class="section" id="run-time-environment-variables">
<h2>Run-Time Environment Variables<a class="headerlink" href="#run-time-environment-variables" title="Permalink to this headline"></a></h2>
<p>The following TAU environment variables may be useful in job submission scripts.</p>
<table border="1" class="docutils align-default">
<colgroup>
<col width="17%" />
<col width="6%" />
<col width="77%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Variable</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>TAU_TRACE</td>
<td>0</td>
<td>Setting to 1 turns on tracing</td>
</tr>
<tr class="row-odd"><td>TAU_CALLPATH</td>
<td>0</td>
<td>Setting to 1 turns on callpath profiling</td>
</tr>
<tr class="row-even"><td>TAU_TRACK_MEMORY_LEAKS</td>
<td>0</td>
<td>Setting to 1 turns on leak detection</td>
</tr>
<tr class="row-odd"><td>TAU_TRACK_HEAP</td>
<td>0</td>
<td>Setting to 1 turns on heap memory routine entry/exit</td>
</tr>
<tr class="row-even"><td>TAU_CALLPATH_DEPTH</td>
<td>2</td>
<td>Specifies depth of callpath</td>
</tr>
<tr class="row-odd"><td>TAU_TRACK_IO_PARAMS</td>
<td>0</td>
<td>Setting 1 with <code class="docutils literal notranslate"><span class="pre">-optTrackIO</span></code></td>
</tr>
<tr class="row-even"><td>TAU_SAMPLING</td>
<td>1</td>
<td>Generates sample based profiles</td>
</tr>
<tr class="row-odd"><td>TAU_COMM_MATRIX</td>
<td>0</td>
<td>Setting to 1 generates communication matrix</td>
</tr>
<tr class="row-even"><td>TAU_THROTTLE</td>
<td>1</td>
<td>Setting to 0 turns off throttling, by default removes overhead</td>
</tr>
<tr class="row-odd"><td>TAU_THROTTLE_NUMCALLS</td>
<td>100000</td>
<td>Number of calls before testing throttling</td>
</tr>
<tr class="row-even"><td>TAU_THROTTLE_PERCALL</td>
<td>10</td>
<td>If a routine is called more than 100000 times and it takes less than 10 usec of inclusive time, throttle it</td>
</tr>
<tr class="row-odd"><td>TAU_COMPENSATE</td>
<td>10</td>
<td>Setting to 1 enables runtime compensation of instrumentation overhead</td>
</tr>
<tr class="row-even"><td>TAU_PROFILE_FORMAT</td>
<td>Profile</td>
<td>Setting to merged generates a single file, snapshot generates a snapshot per thread</td>
</tr>
<tr class="row-odd"><td>TAU_METRICS</td>
<td>TIME</td>
<td>Setting to a comma separated list (TIME:PAPI_TOT_INS)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="compile-time-environment-variables">
<h2>Compile-Time Environment Variables<a class="headerlink" href="#compile-time-environment-variables" title="Permalink to this headline"></a></h2>
<p>Environment variables to be used during compilation through the environment variable <code class="docutils literal notranslate"><span class="pre">TAU_OPTIONS</span></code></p>
<table border="1" class="docutils align-default">
<colgroup>
<col width="26%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Variable</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>-optVerbose</td>
<td>Turn on verbose debugging messages</td>
</tr>
<tr class="row-odd"><td>-optCompInst</td>
<td>Use compiler based instrumentation</td>
</tr>
<tr class="row-even"><td>-optNoCompInst</td>
<td>Do not revert to compiler instrumentation if source instrumentation fails</td>
</tr>
<tr class="row-odd"><td>-optTrackIO</td>
<td>Wrap POSIX I/O call and calculate vol/bw of I/O operations</td>
</tr>
<tr class="row-even"><td>-optKeepFiles</td>
<td>Do not remove .pdb and .inst.* files</td>
</tr>
<tr class="row-odd"><td>-optPreProcess</td>
<td>Preprocess Fortran sources before instrumentation</td>
</tr>
<tr class="row-even"><td>-optTauSelectFile=&lt;file&gt;</td>
<td>Specify selective instrumentation file for tau_instrumentor</td>
</tr>
<tr class="row-odd"><td>-optTwauWrapFile=&lt;file&gt;</td>
<td>Specify path to link_options.tau generated by tau_gen_wrapper</td>
</tr>
<tr class="row-even"><td>-optHeaderInst</td>
<td>Enable instrumentation of headers</td>
</tr>
<tr class="row-odd"><td>-optLinking=</td>
<td>Options passed to the linker</td>
</tr>
<tr class="row-even"><td>-optCompile=</td>
<td>Options passed to the compiler</td>
</tr>
<tr class="row-odd"><td>-optPdtF95Opts=</td>
<td>Add options to the Fortran parser in PDT</td>
</tr>
<tr class="row-even"><td>-optPdtF95Reset=</td>
<td>Reset options for Fortran parser in PDT</td>
</tr>
<tr class="row-odd"><td>-optPdtCOpts=</td>
<td>Options for C parser in PDT</td>
</tr>
<tr class="row-even"><td>-optPdtCXXOpts=</td>
<td>Options for C++ parser in PDT</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="miniweather-example-application">
<h2>MiniWeather Example Application<a class="headerlink" href="#miniweather-example-application" title="Permalink to this headline"></a></h2>
<div class="section" id="getting-the-source-code">
<h3>Getting the source code<a class="headerlink" href="#getting-the-source-code" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li>Connect to Summit and navigate to your project space</li>
<li>For the following examples, well use the MiniWeather application:
<a class="reference external" href="https://github.com/mrnorman/miniWeather" target="_blank">https://github.com/mrnorman/miniWeather</a></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git clone https://github.com/mrnorman/miniWeather.git
</pre></div>
</div>
</div>
<div class="section" id="compile-the-application">
<h3>Compile the application<a class="headerlink" href="#compile-the-application" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li>Well use the PGI compiler; this application supports serial, MPI, MPI+OpenMP,
and MPI+OpenACC</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ module load pgi
$ module load parallel-netcdf
</pre></div>
</div>
<ul class="simple">
<li>Different compilations for Serial, MPI, MPI+OpenMP, and MPI+OpenACC:</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ module load cmake
$ cd miniWeather/c/build
$ ./cmake_summit_pgi.sh
$ make serial
$ make mpi
$ make openmp
$ make openacc
</pre></div>
</div>
<p>Below, well look at using TAU to profile each case.</p>
</div>
<div class="section" id="modifications">
<h3>Modifications<a class="headerlink" href="#modifications" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li>Edit the cmake_summit_pgi.sh and replace <code class="docutils literal notranslate"><span class="pre">mpic++</span></code> with <code class="docutils literal notranslate"><span class="pre">tau_cxx.sh</span></code>. This applies
only for the non-GPU versions.</li>
<li>TAU works with special TAU makefiles to declare what programming models are
expected from the application:<ul>
<li>The available makefiles are located inside TAU installation:</li>
</ul>
</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ module show tau
---------------------------------------------------------------
   /sw/summit/modulefiles/core/tau/2.28.1:
---------------------------------------------------------------
whatis(&quot;TAU 2.28.1 github &quot;)
setenv(&quot;TAU_DIR&quot;,&quot;/sw/summit/tau/tau2/ibm64linux&quot;)
prepend_path(&quot;PATH&quot;,&quot;/sw/summit/tau/tau2/ibm64linux/bin&quot;)
help([[https://www.olcf.ornl.gov/software_package/tau
]])
</pre></div>
</div>
<p>The available Makefiles are named per-compiler and are located in:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ls ${TAU_DIR}/lib/Makefile.tau-pgi*
/sw/summit/tau/tau2/ibm64linux/lib/Makefile.tau-pgi-papi-mpi-cupti-pdt-openmp-pgi
/sw/summit/tau/tau2/ibm64linux/lib/Makefile.tau-pgi-papi-mpi-cupti-pdt-pgi
/sw/summit/tau/tau2/ibm64linux/lib/Makefile.tau-pgi-papi-pdt-pgi
/sw/summit/tau/tau2/ibm64linux/lib/Makefile.tau-pgi_memory_manager-papi-mpi-cupti-pdt-pgi
</pre></div>
</div>
<ul class="simple">
<li>To list all TAU makefiles:</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ls ${TAU_DIR}/lib/Makefile.tau*
</pre></div>
</div>
</div>
<div class="section" id="instrumenting-the-serial-version-of-miniweather">
<h3>Instrumenting the serial version of MiniWeather<a class="headerlink" href="#instrumenting-the-serial-version-of-miniweather" title="Permalink to this headline"></a></h3>
<p>For a serial application, we should not use a Makefile with a programming
model such as MPI or OpenMP. However, as the source code for this <strong>specific</strong>
case includes MPI headers that are not excluded during the compilation of the
serial version, we should declare a Makefile with MPI. We can declare a TAU
makefile with the environment variable <code class="docutils literal notranslate"><span class="pre">TAU_MAKEFILE</span></code>. Moreover, with
<code class="docutils literal notranslate"><span class="pre">TAU_OPTIONS</span></code> below, we add options to the linker as the application depends on
PNetCDF.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ module load tau
$ export TAU_MAKEFILE=/sw/summit/tau/tau2/ibm64linux/lib/Makefile.tau-pgi-papi-mpi-cupti-pdt-pgi
$ export TAU_OPTIONS=&#39;-optLinking=-lpnetcdf -optVerbose&#39;
$ ./cmake_summit_pgi.sh
$ make serial
</pre></div>
</div>
<p>If there were no MPI headers, you should select the makefile
<code class="docutils literal notranslate"><span class="pre">/sw/summit/tau/tau2//ibm64linux/lib/Makefile.tau-pgi-papi-pdt-pgi</span></code> or if
you dont want PDT support,
<code class="docutils literal notranslate"><span class="pre">/sw/summit/tau/tau2//ibm64linux/lib/Makefile.tau-pgi-papi-pgi</span></code>
Add to your submission script the TAU variables that you want to use (or
uncomment them below). By default the TAU will apply profiling, and not apply tracing.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#PAPI metrics</span>
<span class="c1">#export TAU_METRICS=TIME:PAPI_TOT_INS:PAPI_TOT_CYC</span>

<span class="c1"># Instrument the callpath</span>
<span class="n">export</span> <span class="n">TAU_CALLPATH</span><span class="o">=</span><span class="mi">1</span>
<span class="n">export</span> <span class="n">TAU_CALLPATH_DEPTH</span><span class="o">=</span><span class="mi">10</span>

<span class="c1">#Activate tracing</span>
<span class="c1">#export TAU_TRACE=1</span>

<span class="n">jsrun</span> <span class="o">-</span><span class="n">n</span> <span class="mi">1</span> <span class="o">-</span><span class="n">r</span> <span class="mi">1</span> <span class="o">-</span><span class="n">a</span> <span class="mi">1</span> <span class="o">-</span><span class="n">c</span> <span class="mi">1</span> <span class="o">-</span><span class="n">g</span> <span class="mi">1</span>  <span class="o">./</span><span class="n">miniWeather_serial</span>
</pre></div>
</div>
<p>When the execution finishes, one directory is created for each <code class="docutils literal notranslate"><span class="pre">TAU_METRICS</span></code>
declaration with the format <code class="docutils literal notranslate"><span class="pre">MULTI__</span></code></p>
<ul class="simple">
<li>If you do not declare the <code class="docutils literal notranslate"><span class="pre">TAU_METRICS</span></code> variable, then <code class="docutils literal notranslate"><span class="pre">TIME</span></code> is used by
default, and the profiling files are not in a directory. When the execution
ends there will be one file per process called <code class="docutils literal notranslate"><span class="pre">profile.X.Y.Z</span></code>. In this
case there is just one file, called <strong>profile.0.0.0</strong></li>
</ul>
<p>We can export a text file with some information through the <code class="docutils literal notranslate"><span class="pre">pprof</span></code> tool or
visualize it by using <code class="docutils literal notranslate"><span class="pre">paraprof</span></code>.</p>
<p>If an application has no MPI at all, use the argument <code class="docutils literal notranslate"><span class="pre">--smpiargs=&quot;off&quot;</span></code> for
<code class="docutils literal notranslate"><span class="pre">jsrun</span></code>. Otherwise, TAU will fail as MPI is active by default.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pprof profile.0.0.0
Reading Profile files in profile.*

NODE 0;CONTEXT 0;THREAD 0:
---------------------------------------------------------------------------------------
%Time    Exclusive    Inclusive       #Call      #Subrs  Inclusive Name
              msec   total msec                          usec/call
---------------------------------------------------------------------------------------
100.0        0.038     1:10.733           1           1   70733442 .TAU application
100.0            9     1:10.733           1        4654   70733404 int main(int, char **)
 97.1           15     1:08.668        4501       27006      15256 void perform_timestep(double *, double *, double *, double *, double)
 97.1        1,167     1:08.653       27006       54012       2542 void semi_discrete_step(double *, double *, double *, double, int, double *, double *)
 48.4       34,240       34,240       13503           0       2536 void compute_tendencies_z(double *, double *, double *)
 46.9       33,199       33,199       13503           0       2459 void compute_tendencies_x(double *, double *, double *)
  2.5          224        1,752         151       33361      11608 void output(double *, double)
  1.7        1,211        1,211         604         604       2006 MPI_File_write_at_all()
  0.4           36          250           1      100003     250708 void init(int *, char ***)
...


USER EVENTS Profile :NODE 0, CONTEXT 0, THREAD 0
---------------------------------------------------------------------------------------
NumSamples   MaxValue   MinValue  MeanValue  Std. Dev.  Event Name
---------------------------------------------------------------------------------------
      1058    1.6E+05          4  9.134E+04  7.919E+04  MPI-IO Bytes Written
       454        284          4      5.947       13.2  MPI-IO Bytes Written : int main(int, char **) =&gt; void output(double *, double) =&gt; MPI_File_write_at()
       604    1.6E+05    1.6E+05    1.6E+05          0  MPI-IO Bytes Written : int main(int, char **) =&gt; void output(double *, double) =&gt; MPI_File_write_at_all()
      1058       9412     0.1818       3311       3816  MPI-IO Write Bandwidth (MB/s)
       454      1.856     0.1818     0.5083     0.1904  MPI-IO Write Bandwidth (MB/s) : int main(int, char **) =&gt; void output(double *, double) =&gt; MPI_File_write_at()
       604       9412      2.034       5799       3329  MPI-IO Write Bandwidth (MB/s) : int main(int, char **) =&gt; void output(double *, double) =&gt; MPI_File_write_at_all()
       755          8          8          8          0  Message size for all-reduce
       302  2.621E+05          4  1.302E+05  1.311E+05  Message size for broadcast
---------------------------------------------------------------------------------------
</pre></div>
</div>
<dl class="docutils">
<dt>Explanation:</dt><dd><ul class="simple">
<li>One process was running as it is a serial application, even MPI calls
are executed from a single thread.</li>
<li>The total execution time is 70.733 seconds and only 9 msec are
exclusive for the main routine. The rest are caused by subroutines.</li>
<li>The exclusive time is the time caused by the mentioned routine, and
the inclusive is with the execution time from the subroutines.</li>
<li>The #Subrs is the number of the called subroutines.</li>
<li>There is also information about the parallel I/O if any exists, the
bytes, and the bandwidth.</li>
</ul>
</dd>
</dl>
<p>Next, we will look at using the <code class="docutils literal notranslate"><span class="pre">paraprof</span></code> tool for the MPI version of MiniWeather.</p>
</div>
<div class="section" id="instrumenting-the-mpi-version-of-miniweather">
<h3>Instrumenting the MPI version of MiniWeather<a class="headerlink" href="#instrumenting-the-mpi-version-of-miniweather" title="Permalink to this headline"></a></h3>
<p>For the MPI version, we should use a makefile with MPI. The compilation could
fail if the makefile supports MPI+OpenMP, but the code doesnt include any
OpenMP calls. Moreover, with <code class="docutils literal notranslate"><span class="pre">TAU_OPTIONS</span></code> declared below, we will add options to
the linker.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ module load tau
$ export TAU_MAKEFILE=/sw/summit/tau/tau2/ibm64linux/lib/Makefile.tau-pgi-papi-mpi-cupti-pdt-pgi
$ export TAU_OPTIONS=&#39;-optLinking=-lpnetcdf -optVerbose&#39;
$ make mpi
</pre></div>
</div>
<p>Add to your submission script the TAU variables that you want to use (or
uncomment them below). By default, the TAU will apply profiling, and not
tracing.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#PAPI metrics</span>
<span class="n">export</span> <span class="n">TAU_METRICS</span><span class="o">=</span><span class="n">TIME</span><span class="p">:</span><span class="n">PAPI_TOT_INS</span><span class="p">:</span><span class="n">PAPI_TOT_CYC</span>

<span class="c1"># Instrument the callpath</span>
<span class="n">export</span> <span class="n">TAU_CALLPATH</span><span class="o">=</span><span class="mi">1</span>
<span class="n">export</span> <span class="n">TAU_CALLPATH_DEPTH</span><span class="o">=</span><span class="mi">10</span>

<span class="c1">#Track MPI messages</span>
<span class="n">export</span> <span class="n">TAU_TRACK_MESSAGE</span><span class="o">=</span><span class="mi">1</span>
<span class="n">export</span> <span class="n">TAU_COMM_MATRIX</span><span class="o">=</span><span class="mi">1</span>

<span class="c1">#Activate tracing</span>
<span class="c1">#export TAU_TRACE=1</span>

<span class="n">jsrun</span> <span class="o">-</span><span class="n">n</span> <span class="mi">64</span> <span class="o">-</span><span class="n">r</span> <span class="mi">8</span> <span class="o">-</span><span class="n">a</span> <span class="mi">1</span> <span class="o">-</span><span class="n">c</span> <span class="mi">1</span> <span class="o">./</span><span class="n">miniWeather_mpi</span>
</pre></div>
</div>
</div>
<div class="section" id="instrumenting-the-mpi-openmp-version-of-miniweather">
<h3>Instrumenting the MPI+OpenMP version of MiniWeather<a class="headerlink" href="#instrumenting-the-mpi-openmp-version-of-miniweather" title="Permalink to this headline"></a></h3>
<p>The difference with the MPI instrumentation is the TAU Makefile, the jsrun
execution command, and the declaration of the OpenMP threads.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ module load tau
$ export TAU_MAKEFILE=/sw/summit/tau/tau2/ibm64linux/lib/Makefile.tau-pgi-papi-mpi-cupti-pdt-openmp-pgi
$ export TAU_OPTIONS=&#39;-optLinking=-lpnetcdf -optVerbose&#39;
$ make openmp
</pre></div>
</div>
<p>Add to your submission script the TAU variables that you want to use (or
uncomment them below). By default, the TAU will apply profiling, and not
tracing.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#PAPI metrics</span>
<span class="n">export</span> <span class="n">TAU_METRICS</span><span class="o">=</span><span class="n">TIME</span><span class="p">:</span><span class="n">PAPI_TOT_INS</span><span class="p">:</span><span class="n">PAPI_TOT_CYC</span>

<span class="c1"># Instrument the callpath</span>
<span class="n">export</span> <span class="n">TAU_CALLPATH</span><span class="o">=</span><span class="mi">1</span>
<span class="n">export</span> <span class="n">TAU_CALLPATH_DEPTH</span><span class="o">=</span><span class="mi">10</span>

<span class="c1">#Track MPI messages</span>
<span class="n">export</span> <span class="n">TAU_TRACK_MESSAGE</span><span class="o">=</span><span class="mi">1</span>
<span class="n">export</span> <span class="n">TAU_COMM_MATRIX</span><span class="o">=</span><span class="mi">1</span>

<span class="c1">#Activate tracing</span>
<span class="c1">#export TAU_TRACE=1</span>

<span class="n">export</span> <span class="n">OMP_NUM_THREADS</span><span class="o">=</span><span class="mi">4</span>
<span class="n">jsrun</span> <span class="o">-</span><span class="n">n</span> <span class="mi">16</span> <span class="o">-</span><span class="n">r</span> <span class="mi">8</span> <span class="o">-</span><span class="n">a</span> <span class="mi">1</span> <span class="o">-</span><span class="n">c</span> <span class="mi">4</span> <span class="o">-</span><span class="n">b</span> <span class="n">packed</span><span class="p">:</span><span class="mi">4</span> <span class="o">./</span><span class="n">miniWeather_mpi_openmp</span>
</pre></div>
</div>
</div>
<div class="section" id="instrumenting-the-mpi-openacc-version-of-miniweather">
<h3>Instrumenting the MPI+OpenACC version of MiniWeather<a class="headerlink" href="#instrumenting-the-mpi-openacc-version-of-miniweather" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li>For the current TAU version, you should use the <code class="docutils literal notranslate"><span class="pre">tau_exec</span></code> and not the TAU
wrappers only for the compilation.</li>
<li>Use the <code class="docutils literal notranslate"><span class="pre">mpic++</span></code> compiler in the Makefile, do not use TAU wrapper.</li>
<li>Build the MPI+OpenACC version by running <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">openacc</span></code>.</li>
<li>Add the following in your submission file:</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">TAU_METRICS</span><span class="o">=</span><span class="n">TIME</span>
<span class="n">export</span> <span class="n">TAU_PROFILE</span><span class="o">=</span><span class="mi">1</span>
<span class="n">export</span> <span class="n">TAU_TRACK_MESSAGE</span><span class="o">=</span><span class="mi">1</span>
<span class="n">export</span> <span class="n">TAU_COMM_MATRIX</span><span class="o">=</span><span class="mi">1</span>
<span class="n">jsrun</span> <span class="o">-</span><span class="n">n</span> <span class="mi">6</span> <span class="o">-</span><span class="n">r</span> <span class="mi">6</span> <span class="o">--</span><span class="n">smpiargs</span><span class="o">=</span><span class="s2">&quot;-gpu&quot;</span> <span class="o">-</span><span class="n">g</span> <span class="mi">1</span>  <span class="n">tau_exec</span> <span class="o">-</span><span class="n">T</span> <span class="n">mpi</span><span class="p">,</span><span class="n">pgi</span><span class="p">,</span><span class="n">pdt</span> <span class="o">-</span><span class="n">openacc</span> <span class="o">./</span><span class="n">miniWeather_mpi_openacc</span>
</pre></div>
</div>
<ul class="simple">
<li>We declare to TAU to profile the MPI with PDT support through the <code class="docutils literal notranslate"><span class="pre">-T</span></code>
parameters, as well as using the <code class="docutils literal notranslate"><span class="pre">pgi</span></code> tag for the TAU makefile and OpenACC.</li>
<li>CUPTI metrics for OpenACC are not yet supported for TAU.</li>
</ul>
</div>
<div class="section" id="preparing-profiling-data">
<h3>Preparing profiling data<a class="headerlink" href="#preparing-profiling-data" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li>When the execution of the instrumented application finishes, there is one
directory for each <code class="docutils literal notranslate"><span class="pre">TAU_METRICS</span></code> declaration with the format <code class="docutils literal notranslate"><span class="pre">MULTI__</span></code><ul>
<li>If you do not declare the <code class="docutils literal notranslate"><span class="pre">TAU_METRICS</span></code> variable, then by default <code class="docutils literal notranslate"><span class="pre">TIME</span></code>
is used and the profiling files are not in a directory. When the execution
ends, there will be one file per process, called <code class="docutils literal notranslate"><span class="pre">profile.X.Y.Z</span></code>.</li>
</ul>
</li>
<li>In order to use paraprof to visualize the data, your ssh connection should
support X11 forwarding.</li>
<li>Pack the profiling data with a name that you prefer and start the paraprof GUI</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ paraprof --pack name.ppk
$ paraprof name.ppk &amp;
</pre></div>
</div>
<div class="section" id="paraprof">
<h4>Paraprof<a class="headerlink" href="#paraprof" title="Permalink to this headline"></a></h4>
<ul class="simple">
<li>The first window that opens when the <code class="docutils literal notranslate"><span class="pre">paraprof</span> <span class="pre">name.ppk</span></code> command is
executed shows the experiment and the used metrics, for this case, <code class="docutils literal notranslate"><span class="pre">TIME</span></code>,
<code class="docutils literal notranslate"><span class="pre">PAPI_FP_OPS</span></code>, <code class="docutils literal notranslate"><span class="pre">PAPI_TOT_INS</span></code>, <code class="docutils literal notranslate"><span class="pre">PAPI_TOT_CYC</span></code>.</li>
</ul>
<img alt="../../_images/tau_paraprof_manager.png" class="align-center" src="../../_images/tau_paraprof_manager.png" />
<ul class="simple">
<li>The user is responsible for understanding which PAPI metrics should be used</li>
<li>The second window that is automatically loaded shows the <code class="docutils literal notranslate"><span class="pre">TIME</span></code> metric for
each process (they are called nodes) where each color is a different call.
Each horizontal line is a process or Std.Dev./mean/max/min. The length of each
color is related to the metric, if it is <code class="docutils literal notranslate"><span class="pre">TIME</span></code>, it is duration.</li>
</ul>
<img alt="../../_images/tau_mpi_time.png" class="align-center" src="../../_images/tau_mpi_time.png" />
<ul class="simple">
<li><dl class="first docutils">
<dt>Select Options -&gt; Uncheck Stack Bars Together</dt><dd><ul>
<li>It is easier to check the load imbalance across the processes</li>
</ul>
</dd>
</dl>
</li>
</ul>
<img alt="../../_images/tau_mpi_stack_bars.png" class="align-center" src="../../_images/tau_mpi_stack_bars.png" />
<ul class="simple">
<li>If you click on any color, then a new window opens with information about the
specific routine.</li>
</ul>
<img alt="../../_images/tau_mpi_click_color.png" class="align-center" src="../../_images/tau_mpi_click_color.png" />
<ul class="simple">
<li>If you click on the label (node 0, node 1, max, etc.), you can see the value
across each routine in your application.</li>
</ul>
<img alt="../../_images/tau_mpi_sort_time.png" class="align-center" src="../../_images/tau_mpi_sort_time.png" />
<ul class="simple">
<li>Right click on the label (node 0, node 1, max, etc.), and then select Show
Context Event Window (with callpath activated). We can then see various calls
from where they were executed, how many times, and other various information.</li>
</ul>
<img alt="../../_images/tau_mpi_context_event.png" class="align-center" src="../../_images/tau_mpi_context_event.png" />
<ul class="simple">
<li>Select Options -&gt; Show Derived Metric Panel, choose the metrics and then the
operator that you want, then click Apply. Uncheck the Show Derived
Metric.</li>
</ul>
<img alt="../../_images/tau_mpi_derived_metric.png" class="align-center" src="../../_images/tau_mpi_derived_metric.png" />
<ul class="simple">
<li>Click on the new metric, PAPI_TOT_INS / PAPI_TOT_CYC to see the instructions per
cycle (IPC) across the various routines.</li>
</ul>
<img alt="../../_images/tau_mpi_ipc.png" class="align-center" src="../../_images/tau_mpi_ipc.png" />
<ul class="simple">
<li>Click on the label mean:</li>
</ul>
<img alt="../../_images/tau_mpi_mean_ipc.png" class="align-center" src="../../_images/tau_mpi_mean_ipc.png" />
<ul class="simple">
<li>For the non-MPI routines/calls, an IPC that is lower than 1.5 means that
there is a potential for performance improvement.</li>
<li>Menu Windows -&gt; 3D Visualization (3D demands OpenGL) will not work on
Summit, and you will need to download the data on your laptop and install
TAU locally to use this feature.</li>
<li>You can see per MPI rank, per routine, the exclusive time and the floating
operations.</li>
</ul>
<img alt="../../_images/tau_mpi_3d_fp_ops.png" class="align-center" src="../../_images/tau_mpi_3d_fp_ops.png" />
<ul class="simple">
<li>Change the PAPI_FP_OPS to (PAPI_TOT_INS/PAPI_TOT_CYC)</li>
<li>You can see per MPI rank, per routine, the exclusive time and the
corresponding IPC.</li>
</ul>
<img alt="../../_images/tau_mpi_3d_tot_ins.png" class="align-center" src="../../_images/tau_mpi_3d_tot_ins.png" />
</div>
<div class="section" id="which-loops-consume-most-of-the-time">
<h4>Which loops consume most of the time?<a class="headerlink" href="#which-loops-consume-most-of-the-time" title="Permalink to this headline"></a></h4>
<ul class="simple">
<li>Create a file called, for example, <code class="docutils literal notranslate"><span class="pre">select.tau</span></code> with the content:</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">BEGIN_INSTRUMENT_SECTION</span>
<span class="n">loops</span> <span class="n">routine</span><span class="o">=</span><span class="s2">&quot;#&quot;</span>
<span class="n">END_INSTRUMENT_SECTION</span>
</pre></div>
</div>
<p>Then declare the options in your submission script:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">TAU_OPTIONS</span><span class="o">=</span><span class="s2">&quot;-optTauSelectFile=select.tau -optLinking=lpnetcdf -optVerbose&quot;</span>
</pre></div>
</div>
<ul class="simple">
<li>The linking option is required for this application, but may not be for all applications.</li>
<li>Do not forget to unset <code class="docutils literal notranslate"><span class="pre">TAU_OPTIONS</span></code> when its not necessary.</li>
<li>Execute the application as previously shown.</li>
<li>Now you can see the duration of all the loops</li>
</ul>
<img alt="../../_images/tau_mpi_loops1.png" class="align-center" src="../../_images/tau_mpi_loops1.png" />
<ul class="simple">
<li>Select Options -&gt; Select Metric -&gt; Exclusive -&gt; PAPI_TOT_INS/PAPI_TOT_CYC</li>
</ul>
<img alt="../../_images/tau_mpi_loops2.png" class="align-center" src="../../_images/tau_mpi_loops2.png" />
<p>The loops with less than 1.5 IPC have poor performance and could likely be improved.</p>
</div>
<div class="section" id="mpi-openmp">
<h4>MPI+OpenMP<a class="headerlink" href="#mpi-openmp" title="Permalink to this headline"></a></h4>
<ul class="simple">
<li>Execute the MPI+OpenMP version</li>
<li>Now you can see the duration of parallelfor loops and decide when they should
be improved or even removed.</li>
</ul>
<img alt="../../_images/tau_openmp.png" class="align-center" src="../../_images/tau_openmp.png" />
</div>
<div class="section" id="gpu">
<h4>GPU<a class="headerlink" href="#gpu" title="Permalink to this headline"></a></h4>
<ul class="simple">
<li>When we instrument the MPI with OpenACC, we can see the following through paraprof</li>
<li>We can observe the duration of the OpenACC calls</li>
</ul>
<img alt="../../_images/tau_openacc.png" class="align-center" src="../../_images/tau_openacc.png" />
<ul class="simple">
<li>From the main window right click one label and select Show User Event
Statistics Window. Then, we can see the data transfered to the devices</li>
</ul>
<img alt="../../_images/tau_mpi_openacc_data.png" class="align-center" src="../../_images/tau_mpi_openacc_data.png" />
</div>
</div>
</div>
<div class="section" id="cuda-profiling-tools-interface">
<h2>CUDA Profiling Tools Interface<a class="headerlink" href="#cuda-profiling-tools-interface" title="Permalink to this headline"></a></h2>
<p>The <a class="reference external" href="https://docs.nvidia.com/cupti/Cupti/r_main.html#metrics-reference" target="_blank">CUDA Profiling Tools Interface (CUPTI)</a> is used by profiling and tracing
tools that target CUDA applications.</p>
<img alt="../../_images/cupti.png" class="align-center" src="../../_images/cupti.png" />
<p>Matrix multiplication with MPI+OpenMP:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ export TAU_METRICS=TIME,achieved_occupancy
$ jsrun -n 2 -r 2 -g 1  tau_exec -T mpi,pdt,papi,cupti,openmp -ompt -cupti  ./add
</pre></div>
</div>
<p>We choose to use <code class="docutils literal notranslate"><span class="pre">tau_exec</span></code> with MPI, PDT, PAPI, CUPTI, and OpenMP.</p>
<p>Output directories:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">MULTI__TAUGPU_TIME</span>
<span class="n">MULTI__CUDA</span><span class="o">.</span><span class="n">Tesla_V100</span><span class="o">-</span><span class="n">SXM2</span><span class="o">-</span><span class="mi">16</span><span class="n">GB</span><span class="o">.</span><span class="n">domain_d</span><span class="o">.</span><span class="n">active_warps</span>
<span class="n">MULTI__CUDA</span><span class="o">.</span><span class="n">Tesla_V100</span><span class="o">-</span><span class="n">SXM2</span><span class="o">-</span><span class="mi">16</span><span class="n">GB</span><span class="o">.</span><span class="n">domain_d</span><span class="o">.</span><span class="n">active_cycles</span>
<span class="n">MULTI__achieved_occupancy</span>
</pre></div>
</div>
<p>There are many directories because the achieved occupancy is calculated with this
formula</p>
<p><code class="docutils literal notranslate"><span class="pre">Achieved_occupancy</span> <span class="pre">=</span> <span class="pre">CUDA.Tesla_V100-SXM2-16GB.domain_d.active_warps</span> <span class="pre">/</span> <span class="pre">CUDA.Tesla_V100-SXM2-16GB.domain_d.active_cycles</span></code></p>
<p>You can see in the window with the profiling data after you pack them and
execute paraprof, the profiling data are not across all the processes, it
depends if a routine (color) is executed across all of them or not based on
the type of the rourine CPU/GPU.</p>
<img alt="../../_images/cupti_main.png" class="align-center" src="../../_images/cupti_main.png" />
<img alt="../../_images/cupti_main_window.png" class="align-center" src="../../_images/cupti_main_window.png" />
<ul class="simple">
<li>Select the metric achieved occupancy</li>
</ul>
<img alt="../../_images/cupti_occupancy.png" class="align-center" src="../../_images/cupti_occupancy.png" />
<ul class="simple">
<li>Click on the colored bar</li>
<li>The achieved occupancy for this simple benchmark is 6.2%</li>
</ul>
<img alt="../../_images/cupti_occupancy_kernel.png" class="align-center" src="../../_images/cupti_occupancy_kernel.png" />
<p>A similar approach for other metrics, not all of them can be used.
TAU provides a tool called <code class="docutils literal notranslate"><span class="pre">tau_cupti_avail</span></code>, where we can see the list of
available metrics, then we have to figure out which CUPTI metrics use these ones.</p>
</div>
<div class="section" id="tracing">
<h2>Tracing<a class="headerlink" href="#tracing" title="Permalink to this headline"></a></h2>
<p>Activate tracing and declare the data format to OTF2. OTF2 format is supported
only by MPI and OpenSHMEM applications.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ export TAU_TRACE=1
$ export TAU_TRACE_FORMAT=otf2
</pre></div>
</div>
<p>Use Vampir for visualization.</p>
</div>
<div class="section" id="selective-instrumentation">
<h2>Selective Instrumentation<a class="headerlink" href="#selective-instrumentation" title="Permalink to this headline"></a></h2>
<p>For example, do not instrument routine <code class="docutils literal notranslate"><span class="pre">sort*(int</span> <span class="pre">*)</span></code></p>
<ul class="simple">
<li>Create a file <code class="docutils literal notranslate"><span class="pre">select.tau</span></code></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">BEGIN_EXCLUDE_LIST</span>
<span class="n">void</span> <span class="n">sort_</span><span class="c1">#(int *)</span>
<span class="n">END_EXCLUDE_LIST</span>
</pre></div>
</div>
<ul class="simple">
<li>Declare the <code class="docutils literal notranslate"><span class="pre">TAU_OPTIONS</span></code> variable</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>export TAU_OPTIONS=-optTauSelectFile=select.tau
</pre></div>
</div>
<ul class="simple">
<li>Now, the routine <code class="docutils literal notranslate"><span class="pre">sort*(int</span> <span class="pre">*)</span></code> is excluded from the instrumentation.</li>
</ul>
</div>
<div class="section" id="dynamic-phase">
<h2>Dynamic Phase<a class="headerlink" href="#dynamic-phase" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li>Create a file called <code class="docutils literal notranslate"><span class="pre">phase.tau</span></code>.</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>BEGIN_INSTRUMENT_SECTION
dynamic phase name=phase1 file=miniWeather_mpi.cpp line=300 to line=327
END_INSTRUMENT_SECTION
</pre></div>
</div>
<ul class="simple">
<li>Declare the <code class="docutils literal notranslate"><span class="pre">TAU_OPTIONS</span></code> variable.</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>export TAU_OPTIONS=-optTauSelectFile=phase.tau
</pre></div>
</div>
<ul class="simple">
<li>Now when you instrument your application, the phase called phase 1 are the
lines 300-327 of the file <code class="docutils literal notranslate"><span class="pre">miniWeather_mpi.cpp</span></code>. Every call will be
instrumented. This could create signiificant overhead, thus you should be
careful when you use it.</li>
</ul>
</div>
<div class="section" id="static-phase">
<h2>Static Phase<a class="headerlink" href="#static-phase" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li>Create a file called <code class="docutils literal notranslate"><span class="pre">phases.tau</span></code>.</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">BEGIN_INSTRUMENT_SECTION</span>
<span class="n">static</span> <span class="n">phase</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;phase1&quot;</span> <span class="n">file</span><span class="o">=</span><span class="s2">&quot;miniWeather_mpi.cpp&quot;</span> <span class="n">line</span><span class="o">=</span><span class="mi">300</span> <span class="n">to</span> <span class="n">line</span><span class="o">=</span><span class="mi">327</span>
<span class="n">static</span> <span class="n">phase</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;phase2&quot;</span> <span class="n">file</span><span class="o">=</span><span class="s2">&quot;miniWeather_mpi.cpp&quot;</span> <span class="n">line</span><span class="o">=</span><span class="mi">333</span> <span class="n">to</span> <span class="n">line</span><span class="o">=</span><span class="mi">346</span>
<span class="n">END_INSTRUMENT_SECTION</span>
</pre></div>
</div>
<ul class="simple">
<li>Declare the <code class="docutils literal notranslate"><span class="pre">TAU_OPTIONS</span></code> variable.</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>export TAU_OPTIONS=-optTauSelectFile=phases.tau
</pre></div>
</div>
<ul class="simple">
<li>Now, when you use paraprof, you can see different colors for the phase1 and phase2</li>
</ul>
<img alt="../../_images/tau_static_phases.png" class="align-center" src="../../_images/tau_static_phases.png" />
</div>
<div class="section" id="openmp-offload">
<h2>OpenMP Offload<a class="headerlink" href="#openmp-offload" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li>Initially compile your application without TAU and create a dynamic binary</li>
<li>Use all the compiler options requiried for OpenMP offload</li>
<li>Then execute, for example with XL compiler, 1 resource set, 1 MPI process with 2 OpenMP threads, and 2 GPUs:</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">jsrun</span> <span class="o">--</span><span class="n">smpiargs</span><span class="o">=</span><span class="s2">&quot;-gpu&quot;</span> <span class="o">-</span><span class="n">n</span> <span class="mi">1</span> <span class="o">-</span><span class="n">a</span> <span class="mi">2</span> <span class="o">-</span><span class="n">c</span> <span class="mi">2</span> <span class="o">-</span><span class="n">r</span> <span class="mi">1</span> <span class="o">-</span><span class="n">g</span> <span class="mi">2</span> <span class="o">-</span><span class="n">b</span> <span class="n">packed</span><span class="p">:</span><span class="mi">2</span> <span class="n">tau_exec</span> <span class="o">-</span><span class="n">T</span> <span class="n">cupti</span><span class="p">,</span><span class="n">papi</span><span class="p">,</span><span class="n">openmp</span><span class="p">,</span><span class="n">xl</span> <span class="o">-</span><span class="n">cupti</span> <span class="o">./</span><span class="n">a</span><span class="o">.</span><span class="n">out</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../UMS/index.html" class="btn btn-neutral float-right" title="User-Managed Software" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="Profiling Tools" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, OLCF

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    



</body>
</html>